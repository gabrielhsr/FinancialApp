<table mat-table [dataSource]="periodExpenses!" class="mat-elevation-z1" [loading]="expensesLoading">

	<!-- Position Column -->
	<ng-container matColumnDef="description">
		<th mat-header-cell *matHeaderCellDef>{{ "Pages.Home.Description" | translate }}</th>
		<td mat-cell class="table-mobile-title" *matCellDef="let expense; dataSouce: periodExpenses">{{ expense.description }}</td>
	</ng-container>

	<ng-container matColumnDef="amount">
		<th mat-header-cell *matHeaderCellDef>{{ "Pages.Home.Amount" | translate }}</th>
		<td mat-cell class="table-mobile-amount" *matCellDef="let expense; dataSouce: periodExpenses">{{ expense.amount | currency }}</td>
	</ng-container>

	<ng-container matColumnDef="dueDate">
		<th mat-header-cell *matHeaderCellDef>{{ "Pages.Home.DueDate" | translate }}</th>
		<td mat-cell *matCellDef="let expense; dataSouce: periodExpenses">{{ expense.dueDate | date}}</td>
	</ng-container>

	<ng-container matColumnDef="purchaseDate">
		<th mat-header-cell *matHeaderCellDef>{{ "Pages.Home.PurchaseDate" | translate }}</th>
		<td mat-cell class="table-mobile-purchase" *matCellDef="let expense; dataSouce: periodExpenses">{{ expense.purchaseDate | date }}</td>
	</ng-container>

	<ng-container matColumnDef="category">
		<th mat-header-cell *matHeaderCellDef>{{ "Pages.Home.Category" | translate }}</th>
		<td mat-cell class="table-mobile-category" *matCellDef="let expense; dataSouce: periodExpenses">{{ expense.category.name }}</td>
	</ng-container>

	<ng-container matColumnDef="paymentMethod">
		<th mat-header-cell *matHeaderCellDef>{{ "Pages.Home.PaymentMethod" | translate }}</th>
		<td mat-cell class="table-mobile-payment-method" *matCellDef="let expense; dataSouce: periodExpenses">{{ expense.paymentMethod.name }}</td>
	</ng-container>

	<ng-container matColumnDef="options">
		<th mat-header-cell *matHeaderCellDef></th>
		<td mat-cell class="table-mobile-options" *matCellDef="let expense; dataSouce: periodExpenses">
			<button mat-icon-button color="primary" (click)="editExpense(expense)">
				<mat-icon>edit</mat-icon>
			</button>

			<button mat-icon-button color="warn" (click)="deleteExpense(expense)">
				<mat-icon>delete</mat-icon>
			</button>
		</td>
	</ng-container>

	<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
	<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>


<div class="mobile-view" [loading]="expensesLoading">
	<mat-accordion class="mat-elevation-z1" multi="true">
		<mat-expansion-panel *ngFor="let expense of periodExpenses" #panel>
			<mat-expansion-panel-header>
				<mat-panel-title class="panel-title">
					<div class="item">
						<div class="sub-title">
							{{ "Pages.Home.Description" | translate }}
						</div>
						<div [ngClass]="panel.expanded ? '' : 'sub-value'">
							{{ expense.description }}
						</div>
					</div>

					<div class="item">
						<div class="sub-title">
							{{ "Pages.Home.PurchaseDate" | translate }}
						</div>
						<div class="sub-value">
							{{ expense.purchaseDate | date }}
						</div>
					</div>
				</mat-panel-title>

				<mat-panel-description class="panel-description">
					<div class="sub-value">{{ expense.amount | currency }}</div>
				</mat-panel-description>
			</mat-expansion-panel-header>

			<div class="panel-content">
				<div class="sub-content">
					<div class="item">
						<div class="sub-title">
							{{ "Pages.Home.DueDate" | translate }}
						</div>
						<div class="sub-value">
							{{ expense.dueDate | date }}
						</div>
					</div>

					<div class="item">
						<div class="sub-title">
							{{ "Pages.Home.Category" | translate }}
						</div>
						<div class="sub-value">
							{{ expense.category.name }}
						</div>
					</div>
				</div>

				<div class="sub-content">
					<div class="item">
						<div class="sub-title">
							{{ "Pages.Home.PaymentMethod" | translate }}
						</div>
						<div class="sub-value">
							{{ expense.paymentMethod.name }}
						</div>
					</div>
				</div>
			</div>
			<mat-action-row>
				<button mat-icon-button color="primary" (click)="editExpense(expense)">
					<mat-icon>edit</mat-icon>
				</button>
				
				<button mat-icon-button color="warn" (click)="deleteExpense(expense)">
					<mat-icon>delete</mat-icon>
				</button>
			</mat-action-row>
		</mat-expansion-panel>
	</mat-accordion>
</div>
